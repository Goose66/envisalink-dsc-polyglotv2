# envisalink-dsc-polyglotv2
A Nodeserver for Polyglot v2 that interfaces with a DSC PowerSeries alarm panel through an EnvisaLink EVL-3/4 adapater. See http://www.eyezon.com/?page_id=176 for more information on the EnvisaLink EVL-4.

Instructions for manual, co-resident installation:

1. Copy the files from this repository to the folder ~/.polyglot/nodeservers/EnvisaLink-DSC in your Polyglot v2 installation.
2. Log into the Polyglot Version 2 Dashboard (https://(Polyglot IP address):3000)
3. Add the EnvisaLink-DSC nodeserver as a Local nodeserver type.
4. Add the following required Custom Configuration Parameters under Configuration:
```
    ipaddress - IP address of EnvisaLink EVL-4
    password - password for EnvisaLink device
    usercode - user code for DSC alarm panel
```
5. Add the following optional Custom Configuration Parameters:
```
    numpartitions - number of partition nodes to generate (defaults to 1)
    numzones - number of zone nodes to generate (defaults to 8)
    numcmdouts - number of command output nodes to generate (defaults to 4)
```
The nodes of the EnvisaLink Nodeserver generate the following commands in the ISY, allowing the nodes to be added as controllers to scenes:

ZONE
- Sends a *DON* command when the zone is opened
- Sends a *DOF* command when the zone is closed

PARTITION
- Sends a *DON* command when the partition is alarming
- Sends a *DOF* command when the partition is disarmed

COMMAND_OUTPUT
- Sends a *DON* command when the command output is activated

CONTROLLER
- Sends a *DON* command when a smoke/panic alarm is activated
- Sends a *DOF* command when an active smoke/panic alarm is cleared

I am interested in hearing how these commands are being used by users and am open to changing them, particularly for the Partition and Controller nodes.

Here are the known issues with this version:

1. The command output nodes are currently limited to partition 1 only. These Command Output nodes send *DON* commands, but not *DOF* commands.
2. Initially, there are several state values that are unknown when the nodeserver starts and will default to 0 (or last known value if restarted). This includes trouble states, door chime, and the like. These state values may not be correct until the status is changed while the nodeserver is running.
3. During nodeserver startup, it sends keystrokes to the keypad to dump bypass zones to get set the initial zone bypass attributes. This may cause the status lights on the keypads to blink briefly and a Security Event alert (text and/or email) to be generated by EyezON.
4. The initial zone states and bypass status is updated over multiple short polling events, so depending on the shortPoll setting in your configuration, it may take 20 or 30 seconds for the status information to update after starting the Nodeserver.
